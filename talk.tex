\documentclass{beamer}
\usetheme{Montpellier}
\usecolortheme{orchid}
\definecolor{UniGray}{RGB}{93,93,93}
\setbeamercolor{title}{fg=UniGray}
\setbeamercolor{frametitle}{fg=UniGray}
\setbeamercolor{structure}{fg=UniGray}

\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{listings}
\usepackage{graphics}

\lstset{basicstyle=\ttfamily}

\let\olditem\item
\renewcommand{\item}{%
\olditem\vspace{3pt}}

\setcounter{tocdepth}{1}

\title{GnuPG}
\subtitle{Una introducción}
\author{Unai Zalakain\\
{\tiny \url{http://unaizalakain.info/talks/gpg.pdf}}\\
\includegraphics[height=.2\textheight]{qrlink}
}
\date{Jornadas de Tecnología y Cultura Libre,\\ Junio 2016}


\begin{document}

\frame{\titlepage}

\begin{frame}
\frametitle{Índice}
\tableofcontents
\end{frame}


\section{Qué es}
\begin{frame}
\frametitle{Qué es}
\begin{itemize}
    \item software criptográfico
    \item software libre
    \item permite cifrar [confidencialidad]
    \item permite firmar [autenticación, integridad, no repudio]
    \item permite crear redes de confianza
    \item interfaz de línea de comandos
    \item multitud de interfaces gráficas
    \item integración con clientes de correo
    \item integración con gestores de contraseñas
\end{itemize}
\end{frame}


\section{Tipos de cifrado}
\subsection{Cifrado simétrico}
\begin{frame}
\frametitle{Cifrado simétrico}
\begin{itemize}
    \item texto plano {\tiny $\leftarrow$clave$\rightarrow$} texto cifrado
    \item quien puede cifrar, puede descifrar
    \item todas las partes necesitan conocer la clave común
\end{itemize}
\end{frame}

\subsection{Cifrado asimétrico}
\begin{frame}
\frametitle{Cifrado asimétrico}
\begin{itemize}
    \item texto plano {\tiny ---clave pública destinatario$\rightarrow$} texto
        cifrado
    \item texto cifrado {\tiny ---clave privada destinatario$\rightarrow$} texto
        plano
    \item cualquiera que posea la clave pública puede cifrar
    \item solo quien posea la clave privada puede descifrar
    \item se puede cifrar para múltiples claves privadas
\end{itemize}
\end{frame}


\section{Firmas digitales}
\begin{frame}
\frametitle{Firmas digitales}
\begin{itemize}
    \item texto plano {\tiny ---clave privada emisor$\rightarrow$} texto firmado
    \item texto firmado {\tiny ---clave pública emisor$\rightarrow$} texto plano
    \item solo quien posea la clave privada puede firmar
    \item cualquiera que posea la clave pública puede comprobar
\end{itemize}
\end{frame}


\section{Redes de confianza}
\begin{frame}
\frametitle{Redes de confianza}
\begin{itemize}
    \item firma digital de una clave con otra
    \item certificación de que la clave firmada pertenece a la persona
        mencionada
    \item la confianza puede ser transitiva: red de confianza
    \item confianza proporcional a la longitud de la cadena de firmas entre dos
        claves
    \item confianza proporcional al número de caminos sin escalafones comunes
        entre dos claves
    \item \emph{strong set}: la mayor red de confianza interconectada pública
\end{itemize}
\end{frame}


\subsection{Keysigning Parties}
\begin{frame}
\frametitle{Keysingning Parties}
\begin{itemize}
    \item antes:
        \begin{enumerate}
            \item enviar clave pública propia a la coordinadora
        \end{enumerate}
    \item durante:
        \begin{enumerate}
            \item verificar información sobre la clave pública propia
            \item verificar información sobre las claves públicas de las demás
            \item verificar identidad de las demás
        \end{enumerate}
    \item después:
        \begin{enumerate}
            \item firmar digitalmente las claves públicas verificadas
            \item enviar las claves públicas firmadas digitalmente a sus dueñas
            \item recibir la clave pública propia firmada digitalmente por las demás
            \item subir la clave pública propia firmada digitalmente por las
                demás a los servidores
        \end{enumerate}
\end{itemize}
\end{frame}


\section{Subclaves}
\begin{frame}
\frametitle{Subclaves}
\begin{itemize}
    \item clave maestra representa identidad
    \item firmas digitales, cifrado y autenticación delegadas a subclaves
    \item subclaves firmadas digitalmente por clave maestra
    \item clave maestra puede mantenerse separada y segura
    \item clave maestra solo necesaria para operaciones inusuales:
        \begin{itemize}
            \item modificación de claves
            \item firmas digitales de claves de otras
            \item generación de certificados de revocación
        \end{itemize}
    \item subclaves pueden ser revocadas sin afectar identidad principal
\end{itemize}
\end{frame}


\section{Taller práctico}


\subsection{Creando una clave}
\begin{frame}[fragile]
\frametitle{Creando una clave}
\begin{lstlisting}
gpg2 --full-gen-key
\end{lstlisting}
\begin{enumerate}
    \item seleccionar \texttt{RSA and RSA}
    \item seleccionar \texttt{4096} como tamaño
    \item fijar fecha de expiración
    \item proteger con una frase de paso fuerte
    \item certificado de revocación generado automáticamente
\end{enumerate}
\end{frame}


\subsection{Añadiendo una subclave para firmas digitales}
\begin{frame}[fragile]
\frametitle{Añadiendo una subclave para firmas digitales}
\begin{lstlisting}
gpg2 --edit-key sixto.rodriguez@riseup.net

addkey

save
\end{lstlisting}
\begin{enumerate}
    \item seleccionar \texttt{RSA (sign only)}
    \item seleccionar \texttt{4096} como tamaño
    \item fijar fecha de expiración
\end{enumerate}
\end{frame}


\subsection{Añadiendo una identidad}
\begin{frame}[fragile]
\frametitle{Añadiendo una identidad}
\begin{lstlisting}
gpg2 --edit-key sixto.rodriguez@riseup.net

adduid

save
\end{lstlisting}
\begin{enumerate}
    \item seleccionar \texttt{RSA (sign only)}
    \item seleccionar \texttt{4096} como tamaño
    \item fijar fecha de expiración
\end{enumerate}
\end{frame}


\subsection{Creando un certificado de revocación}
\begin{frame}[fragile]
\frametitle{Creando un certificado de revocación}
\begin{lstlisting}
gpg2 --gen-revoke sixto.rodriguez@riseup.net
\end{lstlisting}
\end{frame}


\subsection{Guardando una copia de seguridad}
\begin{frame}[fragile]
\frametitle{Guardando una copia de seguridad}
\begin{lstlisting}
gpg2 --export-secret-keys --armor > secret.gpg
gpg2 --export-keys --armor > public.gpg
\end{lstlisting}
\end{frame}


\subsection{Transfiriendo la clave maestra}
\begin{frame}[fragile]
\frametitle{Transfiriendo la clave maestra}
\begin{itemize}
    \item GPG2 guarda cada clave secreta en un fichero distinto
    \item pueden obtenerse los nombres de los fichero con:
\begin{lstlisting}
gpg2 -K --with-keygrip
\end{lstlisting}
    \item los ficheros se encuentran en
\begin{lstlisting}
${GNUPGHOME}/private-keys-v1.d/<keygrip>.key
\end{lstlisting}
    \item añadir/quitar fichero con clave secreta
\end{itemize}
\end{frame}


\subsection{Publicando la llave}
\begin{frame}[fragile]
\frametitle{Publicando la llave}
\begin{lstlisting}
gpg2 --send-keys CCB5CBD
\end{lstlisting}
\end{frame}


\subsection{Cifrando y descifrando}
\begin{frame}[fragile]
\frametitle{Cifrando y descifrando}
\begin{lstlisting}
echo "Ping" | \
gpg2 -e -a -r sixto@rodriguez@riseup.net | \
gpg2 -d
\end{lstlisting}
\end{frame}


\subsection{Firmando y comprobando}
\begin{frame}[fragile]
\frametitle{Firmando y comprobando}
\begin{lstlisting}
echo "Ping" | gpg2 -s -a | gpg2 -v
\end{lstlisting}
\end{frame}


\subsection{Estableciendo confianza}
\begin{frame}[fragile]
\frametitle{Estableciendo confianza}
egoista firmar claves de las que no estes segura, otra gente puede confiar
en ti
diferencia trust y validity
\begin{lstlisting}
\end{lstlisting}
\end{frame}


\section{Consejos útiles}
\begin{frame}
\frametitle{Consejos útiles}
programas de interes
consejos utiles (riseup)
\end{frame}


\section{Keysingning Party}
\begin{frame}
\frametitle{Keysingning Party}
\end{frame}


\section{Referencias}
\begin{frame}
\frametitle{Referencias}
https://www.rubin.ch/pgp/kspa/gpg-party.en.html
https://wiki.debian.org/Subkeys
https://www.linux.com/learn/pgp-web-trust-core-concepts-behind-trusted-communication
https://alexcabal.com/creating-the-perfect-gpg-keypair/
https://www.gnupg.org/gph/en/manual.html
\end{frame}


\end{document}
